<script setup lang="ts">
import { ref } from 'vue';
import Toolbox from './Toolbox.vue';
import Canvas from './Canvas.vue';
import CanvasV2 from './CanvasV2.vue';
import PropertyInspector from './PropertyInspector.vue';
import TopBar from './TopBar.vue';

// æ–°æ¶æ„å¼€å…³ - å¯ä»¥åˆ‡æ¢æµ‹è¯•
const useNewArchitecture = ref(true);

function toggleArchitecture() {
  useNewArchitecture.value = !useNewArchitecture.value;
  console.log('ğŸ”„ åˆ‡æ¢æ¶æ„:', useNewArchitecture.value ? 'æ–°æ¶æ„' : 'æ—§æ¶æ„');
}
</script>

<template>
  <div class="flex flex-col h-screen font-sans bg-gray-100">
    <TopBar />
    
    <!-- æ¶æ„åˆ‡æ¢æŒ‰é’® -->
    <div class="bg-blue-100 border-b border-blue-200 px-4 py-2 text-center">
      <button 
        @click="toggleArchitecture"
        class="bg-blue-500 text-white px-4 py-1 rounded text-sm hover:bg-blue-600 transition-colors"
      >
        {{ useNewArchitecture ? 'ä½¿ç”¨æ–°æ¶æ„ âœ¨' : 'ä½¿ç”¨æ—§æ¶æ„ ğŸ”„' }}
        <span class="text-xs opacity-75 ml-2">
          ({{ useNewArchitecture ? 'CanvasV2' : 'Canvas' }})
        </span>
      </button>
    </div>
    
    <main class="flex flex-grow overflow-hidden">
      <Toolbox />
      
      <!-- æ¡ä»¶æ¸²æŸ“ä¸åŒçš„Canvas -->
      <CanvasV2 v-if="useNewArchitecture" />
      <Canvas v-else />
      
      <PropertyInspector />
    </main>
  </div>
</template>